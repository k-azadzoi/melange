(this.webpackJsonpmelange=this.webpackJsonpmelange||[]).push([[0],{107:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(12),l=t(44),i=t(16),o=t(21),s=t(28),u=t(43),m=t(37),p=t(14),d=t(74),b=t(4),h=t(29),E=t(38),f=t(33),g=t(41),v=t(141),w=t(146),y=t(145),O=t(147),j=t(148),x=t(7);function k(){var e=Object(E.a)(["\n    {\n        planets(order_by: {name: asc}) {\n            name\n            inhabitants\n            id\n            imageUrl\n        }\n    }\n\n"]);return k=function(){return e},e}var N=Object(g.a)(k()),S=Object(x.a)((function(e){return{root:{flexGrow:1,display:"flex",flexWrap:"wrap",overflow:"hidden",backgroundColor:e.palette.background.paper},gridList:{width:400,paddingTop:10,paddingBottom:5},title:{color:"#ED8936",fontSize:"24px"},planetGrid:{},subtitle:{fontSize:"16px",paddingTop:"5px"},icon:{color:"rgba(255, 255, 255, 0.54)"}}}))((function(e){var a=e.newPlanets,t=e.classes,n=Object(f.c)(N),c=n.loading,i=n.error,o=n.data;return c?r.a.createElement("p",null,"Loading..."):i?r.a.createElement("p",null,"Error :( "):r.a.createElement("div",null,(a||o.planets).map((function(e){var a=e.id,n=e.name,c=e.imageUrl,i=e.inhabitants;return r.a.createElement("div",{key:a,className:t.root},r.a.createElement(l.b,{to:"/planet/".concat(a)},r.a.createElement(v.a,{className:t.planetGrid,maxWidth:"md"},r.a.createElement(y.a,{container:!0,spacing:4},r.a.createElement(y.a,{item:!0,xs:12,sm:6,md:4},r.a.createElement(w.a,{cellHeight:260,spacing:1,cols:1,className:t.gridList},r.a.createElement(O.a,null,r.a.createElement("img",{src:c,alt:n}),r.a.createElement(j.a,{title:n,subtitle:r.a.createElement("span",null," ",i," "),classes:{title:t.title,subtitle:t.subtitle}}))))))))})))})),C=t(18),_=t(152),$=t(149),L=t(150),P=t(151),F=t(157),G=Object(x.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},appBar:{backgroundColor:"#9C4421",color:"#F7FAFC"},button:{color:"#F7FAFC",paddingTop:"12px"},title:Object(C.a)({flexGrow:1,display:"none",paddingLeft:"20px"},e.breakpoints.up("sm"),{display:"block"}),search:{},inputRoot:{color:"inherit"},toolbar:e.mixins.toolbar,inputInput:Object(C.a)({paddingLeft:"calc(1em + ".concat(e.spacing(1),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:"12ch","&:focus":{width:"20ch"}})}}))((function(e){var a=e.classes,t=e.searchValue,n=e.onChange,c=e.onSearch,i=e.onKeyPress;return r.a.createElement("div",{className:a.root},r.a.createElement("div",{className:a.toolbar}),r.a.createElement($.a,{className:a.appBar},r.a.createElement(L.a,null,r.a.createElement(P.a,{className:a.title,variant:"h6",noWrap:!0},r.a.createElement(l.b,{style:{color:"inherit",textDecoration:"inherit"},to:"/"}," Melange ")),r.a.createElement("div",{className:a.search},r.a.createElement(F.a,{placeholder:"Search\u2026",classes:{root:a.inputRoot,input:a.inputInput},inputProps:{"aria-label":"search"},value:t,onChange:n,onKeyPress:i}),r.a.createElement(_.a,{className:a.button,type:"submit",onClick:c},"Search")))))}));function T(){var e=Object(E.a)(["\nquery Search($match: String) {\n    planets(order_by: { name: asc }, where: { name: { _ilike: $match }}) {\n      name\n      imageUrl\n      inhabitants\n      id\n    }\n  }\n"]);return T=function(){return e},e}var B=Object(g.a)(T()),I=function(){var e=Object(n.useState)(""),a=Object(h.a)(e,2),t=a[0],c=a[1],l=Object(f.a)(B),i=Object(h.a)(l,2),o=i[0],s=i[1],u=s.loading,m=s.error,p=s.data;return u?r.a.createElement("p",null,"Loading..."):m?r.a.createElement("p",null,"Error :( "):r.a.createElement("div",null,r.a.createElement(G,{searchValue:t,onChange:function(e){return c(e.target.value)},onSearch:function(){return o({variables:{match:"%".concat(t,"%")}})},onKeyPress:function(e){"Enter"===e.key&&(o({variables:{match:"%".concat(t,"%")}}),e.preventDefault())}}),r.a.createElement(S,{newPlanets:p?p.planets:null}))},R=t(156),U=t(154),q=t(153),A=t(155);function D(){var e=Object(E.a)(["\n    mutation($body: String!, $id: uuid!) {\n        AddReview(body: $body, id: $id) {\n            affected_rows\n        }\n    }\n"]);return D=function(){return e},e}function K(){var e=Object(E.a)(["\n    subscription Planet($id: uuid!){\n        planets_by_pk(id: $id) {\n            id\n            imageUrl\n            inhabitants\n            name\n            reviews(order_by: { created_at: desc }) {\n                id\n                body\n            }\n        }\n    }\n"]);return K=function(){return e},e}var W=Object(g.a)(K()),z=Object(g.a)(D()),J=Object(x.a)((function(e){return{root:{flexGrow:1},planetInfo:{textAlign:"center"},planetText:{paddingTop:"20px"}}}))((function(e){var a=e.match.params.id,t=e.classes,c=Object(f.d)(W,{variables:{id:a}}),l=c.loading,i=c.error,o=c.data,s=Object(n.useState)(""),u=Object(h.a)(s,2),m=u[0],p=u[1],d=Object(f.b)(z),b=Object(h.a)(d,1)[0];if(l)return r.a.createElement("p",null,"Loading...");if(i)return r.a.createElement("p",null,"Error :(");var E=o.planets_by_pk,g=E.name,v=E.imageUrl,w=(E.inhabitants,E.reviews);return r.a.createElement("div",{className:t.root},r.a.createElement(G,null),r.a.createElement("div",{className:t.planetInfo},r.a.createElement(P.a,{variant:"h3",className:t.planetText},g),r.a.createElement("img",{src:v,alt:"planets"})),r.a.createElement("form",{type:"hidden",name:"review","data-netlify":"true",onSubmit:function(){b({variables:{id:a,body:m}}).then((function(){return p("")})).catch((function(e){p(e.message)}))}},r.a.createElement(y.a,{container:!0,spacing:3},r.a.createElement(y.a,{item:!0,md:6,xs:12},r.a.createElement(R.a,{label:"Enter a Review",name:"body",variant:"outlined",value:m,onChange:function(e){return p(e.target.value)}})),r.a.createElement(_.a,{className:t.button,type:"submit"},"Submit"))),r.a.createElement(U.a,null),r.a.createElement(q.a,null,w.map((function(e){return r.a.createElement(A.a,{key:e.id}," ",e.body)}))))})),V=(t(97),new u.a({uri:"https://".concat("review-hasura.herokuapp.com/v1/graphql")})),H=new d.a({uri:"wss://".concat("review-hasura.herokuapp.com/v1/graphql"),options:{reconnect:!0}}),M=Object(p.d)((function(e){var a=e.query,t=Object(b.l)(a);return"OperationDefinition"===t.kind&&"subscription"===t.operation}),H,V),Q=new s.a({cache:new m.a,link:M}),X=function(){return r.a.createElement(l.a,null,r.a.createElement(o.a,{client:Q},r.a.createElement(i.c,null,r.a.createElement(i.a,{exact:!0,path:"/planet/:id",component:J}),r.a.createElement(i.a,{path:"/",component:I}))))};Object(c.render)(r.a.createElement(X,null),document.getElementById("root"))},86:function(e,a,t){e.exports=t(107)},97:function(e,a,t){}},[[86,1,2]]]);
//# sourceMappingURL=main.0067cfb7.chunk.js.map